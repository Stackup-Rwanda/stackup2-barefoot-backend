{
  "swagger": "2.0",
  "info": {
    "version": "1.0.0",
    "title": "Barefoot Nomad API Documentation",
    "description": "Make company global travel and accommodation easy and convenient for the strong workforce of savvy members of staff, by leveraging the modern web.",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "host": "stackup2-barefoot-backend-stag.herokuapp.com",
  "basePath": "/api",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/auth/signup": {
      "post": {
        "summary": "create an account",
        "tags": [
          "Sign up"
        ],
        "description": "User sign up endpoint",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "User information",
            "in": "body",
            "description": "User information required for sign up",
            "required": true,
            "schema": {
              "$ref": "#/definitions/signup"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created",
            "schema": {
              "$ref": "#/responses/signupSuccess"
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/responses/signupFail"
            }
          }
        }
      }
    },
  "/auth/login":{
      "post": {
        "summary": "User Login",
        "produces": [
          "application/json"
        ],
        "consumes":[
          "application/x-www-form-urlencoded"
        ],
          "parameters": [
            {
              "name": "email",
              "in": "formData",
              "required": true,
              "type": "string",
              "format": "email",
              "description": "Email for securing user's account"
            },
            {
              "name": "password",
              "in": "formData",
              "required": true,
              "type": "string",
              "format": "password",
              "description": "Password for authentication"
            }
          ],
        "responses": {
         "200":{
           "description":"This is how the response looks like when login is successful",
            "schema":{
            "$ref": "#/login-definition/login-response-real-data"
          }
         },
         "400":{
           "description":"This is how the response looks like when a user sends empty email, or empty password or both empty",
           "schema":{
             "$ref":"#/login-definition/login-response-empty-data"
           }
         },
         "401":{
           "description":"This is how the response looks like when a user sends wrong email or password",
           "schema":{
             "$ref":"#/login-definition/login-response-wrong-data"
           }
         }
        }
      }
    },
    "/auth/resetpassword":{
      "post": {
        "summary": "Reset email",
        "produces": [
          "application/json"
        ],
        "consumes":[
          "application/json"
        ],
          "parameters": [
            {
              "name": "User email",
              "in": "body",
              "description": "email for a user ",
              "required": true,
              "schema": {
                "$ref": "#/definitions/resetEmail"
              }
            }],
        "responses": {
         "200":{
           "description":"This is how the response looks like when user exist and an email is successful sent",
            "schema":{
            "$ref": "#/responses/reset-password-email-success"
          }
         },
         "403":{
           "description":"This is how the response looks like when a user does not exist",
           "schema":{
             "$ref":"#/responses/reset-password-email-fail"
           }
         },
         "400":{
          "description":"This is how the response looks like when there occured an error",
          "schema":{
            "$ref":"#/responses/reset-password-email-error"
          }
        }
        }
      }
    },
    "/auth/resetpassord/:token":{
      "post": {
        "summary": "update password",
        "produces": [
          "application/json"
        ],
        "consumes":[
          "application/json"
        ],
          "parameters": [
            {
              "name": "User password",
              "in": "body",
              "description": "the new password ",
              "required": true,
              "schema": {
                "$ref": "#/definitions/updatePassword"
              }
            }
          ],
        "responses": {
         "200":{
           "description":"This is the response when password is updated",
            "schema":{
            "$ref": "#/responses/update-password-success"
          }
         },
         "400":{
           "description":"This is the response when occured an error while updating",
           "schema":{
             "$ref":"#/responses/reset-password-email-error"
           }
         }
        }
      }
    },
    "/admin/assignrole": {
      "post": {
        "summary": "Super user(IT staff) can Assign roles to users",
        "tags": [
          "User Role settings"
        ],
        "description": "user role settings",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Role and email information",
            "in": "body",
            "description": "Email and role information are required",
            "required": true,
            "schema": {
              "$ref": "#/definitions/assignrole"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Assigned role success",
            "schema": {
              "$ref": "#/responses/assignRoleSuccess"
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/responses/assignRoleFail"
            }
          },
          "401": {
            "description": "UnAuthorized",
            "schema": {
              "$ref": "#/responses/assignRoleFail"
            }
          },
          "403": {
            "description": "User not Exist",
            "schema": {
              "$ref": "#/responses/assignRoleFail"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "signup": {
      "properties": {
        "firstName": {
          "type": "string",
          "required": true,
          "example": "John"
        },
        "lastName": {
          "type": "string",
          "required": true,
          "example": "Doe"
        },
        "email": {
          "type": "string",
          "required": true,
          "example": "john@doe.com"
        },
        "address": {
          "type": "string",
          "required": true,
          "example": "Kigali, Rwanda"
        },
        "password": {
          "type": "string",
          "required": true,
          "example": "hellothere"
        },
        "gender": {
          "type": "string",
          "required": true,
          "example": "Male"
        }
      }
    },
    "incompleteSignup": {
      "properties": {
        "firstName": {
          "type": "string",
          "required": true,
          "example": "John"
        },
        "lastName": {
          "type": "string",
          "required": true,
          "example": "Doe"
        },
        "email": {
          "type": "string",
          "required": true,
          "example": "john@doe.com"
        },
        "address": {
          "type": "string",
          "required": true,
          "example": "Kigali, Rwanda"
        }
      }
    },
    "resetEmail":{
      "email": {
        "type": "string",
        "required": true,
        "example": "john@doe.com"
      }
    },
    "updatePassword":{
      "password": {
        "type": "string",
        "required": true,
        "example": "didiny"
      }
    },
    "assignrole": {
      "properties":{
        "email": {
          "type": "string",
          "required": true,
          "example": "john@doe.com"
        },
        "role": {
          "type": "string",
          "required": true,
          "example": "manager | superAdmin | travelAdmin | travelTeamMember | requester"
        }
      }      
    }
  },
  "responses": {
    "signupSuccess": {
      "properties": {
        "message": {
          "type": "string",
          "example": "Account created successfully"
        },
        "token": {
          "type": "string",
          "example": "eyJhbGciOiJIUzI1NiIsInR....."
        }
      }
    },
    "signupFail": {
      "properties": {
        "error": {
          "type": "string",
          "example": "Sign up failed! Please try again later"
        }
      }
    },
    "reset-password-email-success":{
      "properties":{
        "message":{
          "type":"string",
          "example":"The email has sent successful"
        }
      }
    },
    "reset-password-email-fail":{
      "properties":{
        "error":{
          "type":"string",
          "example":"User does not exist"
        }
      }
    },
    "reset-password-email-error":{
      "properties":{
        "error":{
          "type":"string",
          "example":"occured a error"
        }
      }
    },
    "update-password-success":{
      "properties":{
        "message":{
          "type":"string",
          "example":"password changed"
        }
      }
    },
    "update-password-fail":{
      "properties":{
        "error":{
          "type":"string",
          "example":"User does not exist"
        }
      }
    }
  },
  "login-definition":{
    "login-response-real-data":{
      "properties": {
        "message":{
          "type":"string",
          "example":"successfully logged in"
        },
        "token": {
          "type": "string",
          "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c"
        }
      }
    },
    "login-response-wrong-data":{
      "properties": {
        "message":{
          "type":"string",
          "example":"unknown credentials"
        }
      }
    },
    "login-response-empty-data":{
      "properties": {
        "message":{
          "type":"string",
          "example":"enter your email or password"
        }
      }
    }}
}
